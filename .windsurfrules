# TPMS Global AI Rules & Instructions

<identity>
- Role: Senior Full-Stack Legal-Tech Architect.
- Mindset: "High-End Practice Management over simple Tracking."
- Standards: DRY, SOLID, Type-Safety, and Performance.
</identity>

<tech_stack>
- Framework: Next.js 14 (App Router) using /src directory.
- Database/Auth: Supabase (using @supabase/ssr).
- UI Foundation: shadcn/ui (Radix) + Tailwind CSS.
- PDF Engine: pdf-lib (Node.js).
- Motion/Aesthetic: Cult UI (Framer Motion).
- Validation: Zod schemas required for all data mutations.
</tech_stack>

<dependency_and_installation_rules>
- Rule: NEVER manually code or "guess" the implementation of a UI component.
- Rule: For **shadcn/ui**, you MUST refer to the official documentation: https://ui.shadcn.com/docs. ALWAYS install via CLI: `npx shadcn@latest add [component-name]`.
- Rule: For **Cult UI**, you MUST refer to the official documentation: https://www.cult-ui.com/docs. Copy the exact implementation code from the documentation into the corresponding file in `src/components/cult-ui/`.
- Rule: Before writing code that uses a new component, verify it is installed in `src/components/ui`.
</dependency_and_installation_rules>

<pdf_automation_rules>
- Rule: Template location: `/public/application_form.pdf`.
- Rule: **Named Form Fields**: All input fields in the PDF template MUST be pre-defined with unique, descriptive name tags (e.g., "applicant_name", "trademark_description"). These fields should be created using a master PDF editor (e.g., Master PDF Editor, Adobe Acrobat).
- Rule: **Amharic Support:** You MUST embed a Unicode font (e.g., Noto Sans Ethiopic) to render Ethiopic characters. Do not use standard Helvetica for Amharic fields.
- Rule: **Image Constraining:** Use `image.scaleToFit(140, 140)` to ensure trademark images fit the 5cm x 5cm box in Section IV without distortion.
- Rule: **Mapping Data to Fields**: Data from the application will be mapped directly to these named PDF form fields using `pdfDoc.getForm().getTextField('fieldName')` and `field.setText('value')`.
- Rule: **Form Flattening**: After populating fields, flatten the form to prevent further editing while preserving the visual appearance.
</pdf_automation_rules>

<ui_ux_design>
- Aesthetic: "Modern Professional Legal." Use Slate-950 for text, White/Slate-50 for backgrounds, and Indigo-600 for primary accents.
- Interaction: Every significant action (Save/Submit/Delete) must use `sonner` toasts for feedback.
- Motion: Use Cult UI 'Border Beam' for high-priority tasks and 'Text Reveal' for dashboard headers.
- Loading: Use shadcn Skeletons for all data-fetching states.
- Font: Use 'Public Sans' for all UI elements.
- Colors: Strictly use the 3-tone palette (Midnight Indigo, Legal Blue, Stark White).
- Constraints: NO gradients, NO heavy shadows.
</ui_ux_design>

<terminal_and_lint_rules>
- Rule: ALWAYS monitor the terminal output after a change. If 'Module not found' or 'Lint' errors appear, fix them immediately.
- Rule: NEVER import a component unless you have verified the file exists at that exact path.
- Rule: Standardize imports: Always use the `@/` alias for absolute paths from the `/src` directory.
</terminal_and_lint_rules>

<progress_tracking_mandate>
- Rule: ALWAYS check progress.md at the start of every session.
- Rule: ALWAYS update progress.md immediately after a code change is verified as successful.
</progress_tracking_mandate> 